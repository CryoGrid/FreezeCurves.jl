<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · FreezeCurves.jl</title><meta name="title" content="Home · FreezeCurves.jl"/><meta property="og:title" content="Home · FreezeCurves.jl"/><meta property="twitter:title" content="Home · FreezeCurves.jl"/><meta name="description" content="Documentation for FreezeCurves.jl."/><meta property="og:description" content="Documentation for FreezeCurves.jl."/><meta property="twitter:description" content="Documentation for FreezeCurves.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>FreezeCurves.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Getting-started"><span>Getting started</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li><li><a class="tocitem" href="inference/">Inference</a></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="api/FreezeCurves/">FreezeCurves</a></li></ul></li><li><a class="tocitem" href="contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CryoGrid/FreezeCurves.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CryoGrid/FreezeCurves.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FreezeCurves.jl"><a class="docs-heading-anchor" href="#FreezeCurves.jl">FreezeCurves.jl</a><a id="FreezeCurves.jl-1"></a><a class="docs-heading-anchor-permalink" href="#FreezeCurves.jl" title="Permalink"></a></h1><p><code>FreezeCurves</code> is a lightweight Julia package to facilitate the study and analysis of <a href="https://acsess.onlinelibrary.wiley.com/doi/abs/10.2136/sssaj1966.03615995003000060011x">soil freezing characteristics</a> (Koopmans and Miller, 1966). The relationship between temperature and unfrozen water content in porous media (such as soils) is often highly nonlinear and plays a significant role in the analysis of freeze-thaw dynamics in science and engineering. One common application is in the geophysical modeling of permafrost, where having faithful representations of freeze-thaw processes is often paramount to accurately resolving long-term changes in the subsurface thermal regime.</p><h3 id="Table-of-contents"><a class="docs-heading-anchor" href="#Table-of-contents">Table of contents</a><a id="Table-of-contents-1"></a><a class="docs-heading-anchor-permalink" href="#Table-of-contents" title="Permalink"></a></h3><ul><li><a href="#FreezeCurves.jl">FreezeCurves.jl</a></li><li class="no-marker"><ul><li><a href="#Overview">Overview</a></li><li><a href="#Getting-started">Getting started</a></li><li><a href="#References">References</a></li><li><a href="inference/#Estimating-freeze-curve-parameters">Estimating freeze curve parameters</a></li></ul></li><li><a href="api/#Index-of-public-API">Index of public API</a></li></ul><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>The soil freezing characteristic curve (SFCC) is typically a monotonic function which maps (usually subzero) temperatures [°C] to volumetric unfrozen/liquid water contents [m³/m³]. The SFCC is closely related to the <a href="https://en.wikipedia.org/wiki/Water_retention_curve">soil-water retention curve</a> (SWRC) which governs the similar non-linear realtionship between soil-water matric potential [m] saturation [m³/m³]. SWRCs are widely used in hydrological modeling, with the two most common formulations being the van Genuchten (1980) and Brooks-Corey (Brooks, 1965) models. SFCCs are less widely known, but numerous models have been proposed over the years (Kurylyk and Watanbe, 2013).</p><p>This package is intended to act as a living repository of SFCC/SWRC implementations which can then be fitted to data or consumed downstream by thermal or hydrological models such as CryoGrid (Westermann et al. 2022), or more specifically its <a href="https://github.com/CryoGrid/CryoGrid.jl">sibling Julia implementation</a>.</p><p>Currently this package provides implementations of the following freeze curves:</p><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Description</th><th style="text-align: right">Independent variable</th></tr><tr><td style="text-align: right"><code>FreeWater</code></td><td style="text-align: right">Simple, piecewise-linear, enthalpy-based freeze/thaw scheme for pure &quot;free&quot; water.</td><td style="text-align: right">Enthalpy</td></tr><tr><td style="text-align: right"><code>PainterKarra</code></td><td style="text-align: right">Coupled temperature-water retention model of Painter et al. (2014)</td><td style="text-align: right">Temperature</td></tr><tr><td style="text-align: right"><code>DallAmico</code></td><td style="text-align: right">Coupled temperature-water retention model of Dall&#39;Amico (2011).</td><td style="text-align: right">Temperature</td></tr><tr><td style="text-align: right"><code>DallAmicoSalt</code></td><td style="text-align: right">Same as <code>DallAmico</code> but accounting for freezing point depressions due to salinity.</td><td style="text-align: right">Temperature</td></tr><tr><td style="text-align: right"><code>McKenzie</code></td><td style="text-align: right">Exponential-type empirical model of McKenzie et al. (2007)</td><td style="text-align: right">Temperature</td></tr><tr><td style="text-align: right"><code>Westermann</code></td><td style="text-align: right">Nonlinear empirical model of Westermann et al. (2011)</td><td style="text-align: right">Temperature</td></tr></table><h2 id="Getting-started"><a class="docs-heading-anchor" href="#Getting-started">Getting started</a><a id="Getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started" title="Permalink"></a></h2><p>FreezeCurves.jl can be installed using the Julia package manager:</p><pre><code class="nohighlight hljs">pkg&gt; add FreezeCurves</code></pre><p>or</p><pre><code class="language-julia hljs">import Pkg
Pkg.add(&quot;FreezeCurves&quot;)</code></pre><p>All freezing characteristic curves are implemented as &quot;callable&quot; structs subtyping <code>SFCC</code>. Callable structs are those with corresponding method definitions that allow them to be invoked like a function. As an example, we can initialize the freeze curve of McKenzie et al. (2007) with default parameter settings:</p><pre><code class="language-julia hljs">using FreezeCurves

mkfc = McKenzie()</code></pre><p>The curve can then be evaluated at a particular temperature by calling it as a function:</p><pre><code class="language-julia hljs">mkfc(-1.0u&quot;°C&quot;)
# output
1.860037988010418e-44</code></pre><p>The <code>McKenzie</code> struct contains default parameter settings necessary to evaluate the freeze curve. These can also be customized on construction. We could, for example, use a different value for the shape parameter, γ [K]</p><pre><code class="language-julia hljs">mkfc2 = McKenzie(γ=1.0u&quot;K&quot;)
mkfc2(-1.0u&quot;°C&quot;)
# output
0.18393972058572117</code></pre><p>which results in a much longer curve with more than 18% unfrozen water content by volume at -1.0 °C!</p><p>All freeze curves also accept their parameters (excluding some constants) as function arguments, with default values set to those found in the struct. For example, the full method signature for <code>McKenzie</code> is:</p><p><code>(f::McKenzie)(T; θtot, θsat, θres, Tₘ, γ)</code></p><p>where <code>θtot</code> is the total (volumetric) water content (water + ice), <code>θsat</code> is the saturated water content (a.k.a natural porosity), <code>θres</code> is the residual water content, <code>Tₘ</code> is the melting temperature, and <code>γ</code> is the aforementioned shape parameter. We could have, therefore, adjusted the shape parameter by simply setting the keyword argument for our original <code>mkfc</code>:</p><pre><code class="language-julia hljs">mkfc(-1.0u&quot;°C&quot;, γ=1.0u&quot;K&quot;)
# output
0.18393972058572117</code></pre><p>In cases where it is more convenient/appropriate to modify the default parameter values in the struct itself, it&#39;s worth noting that some parameters are nested one or two levels deep, e.g. setting the saturated water content (porosity) for a <code>DallAmico</code> freeze curve would look like:</p><pre><code class="language-julia hljs">dafc = DallAmico(swrc=VanGenuchten(water=SoilWaterVolume(θsat=0.75)))</code></pre><p>This is admittedly somewhat unwieldy, so <code>FreezeCurves</code> re-exports <code>@set!</code> from <a href="https://github.com/jw3126/Setfield.jl">Setfield.jl</a> to make this a bit easier:</p><pre><code class="language-julia hljs">dafc = DallAmico()
@set! dafc.swrc.vol.θsat = 0.75
dafc.swrc.vol.θsat
# output
0.75</code></pre><p>Note also that FreezeCurves.jl <strong>strictly uses unitful quantities</strong> (from <a href="https://github.com/PainterQubits/Unitful.jl">Unitful.jl</a>) to ensure physical coherence and avoid confusion between temperature units. The macro <code>u&quot;°C&quot;</code> applies units of degrees Celsius to the floating point number <code>-0.1</code> (the degree symbol can be typed in the Julia REPL or editor using <code>\degree</code> followed the <code>TAB</code> key). Speical method dispatches for <code>ustrip</code> are provided for freeze and water retention curve function types that will automatically strip the units from all fields nested within the function struct. <strong>When used without units, all temperatures are assumed to be in degrees Celsius (°C)!</strong></p><pre><code class="language-julia hljs">mkfc_nounits = ustrip(mkfc)
mkfc_nounits(-0.1)
# output
0.1839397205856375</code></pre><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>Brooks RH. Hydraulic properties of porous media. Colorado State University; 1965.</p><p>Dall&#39;Amico M, Endrizzi S, Gruber S, Rigon RJ. A robust and energy-conserving model of freezing variably-saturated soil. The Cryosphere. 2011 Jun 1;5(2):469-84.</p><p>Koopmans RW, Miller RD. Soil freezing and soil water characteristic curves. Soil Science Society of America Journal. 1966 Nov;30(6):680-5.</p><p>Kurylyk BL, Watanabe K. The mathematical representation of freezing and thawing processes in variably-saturated, non-deformable soils. Advances in Water Resources. 2013 Oct 1;60:160-77.</p><p>McKenzie JM, Voss CI, Siegel DI. Groundwater flow with energy transport and water–ice phase change: numerical simulations, benchmarks, and application to freezing in peat bogs. Advances in water resources. 2007 Apr 1;30(4):966-83.</p><p>Westermann S, Boike J, Langer M, Schuler TV, Etzelmüller B. Modeling the impact of wintertime rain events on the thermal regime of permafrost. The Cryosphere. 2011 Oct 26;5(4):945-59.</p><p>Westermann S, Ingeman-Nielsen T, Scheer J, Aalstad K, Aga J, Chaudhary N, Etzelmüller B, Filhol S, Kääb A, Renette C, Schmidt LS. The CryoGrid community model (version 1.0)–a multi-physics toolbox for climate-driven simulations in the terrestrial cryosphere. Geoscientific Model Development Discussions. 2022 Jun 7:1-61.</p><p>Van Genuchten MT. A closed‐form equation for predicting the hydraulic conductivity of unsaturated soils. Soil science society of America journal. 1980 Sep;44(5):892-8.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="inference/">Inference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 6 May 2024 15:47">Monday 6 May 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
